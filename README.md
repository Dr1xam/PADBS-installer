# Proxmox Auto-Deployment: Base Services

> –ê–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏—Ö –º–∞—à–∏–Ω —É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ Proxmox VE. –ó–∞–±–µ–∑–ø–µ—á—É—î –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞—à–∏–Ω —ñ–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–º –ø—Ä–æ–≥—Ä–∞–º–Ω–∏–º –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è–º (–ù–∞ –¥–∞–Ω–∏–π –º–æ–º–µ–Ω—Ç —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ª–∏—à–µ Rocketchat-server).

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

### Virtualization & System
- **Proxmox VE** - –¶—ñ–ª—å–æ–≤–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—ó (–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è CLI `qm`, `pct`).
- **Ubuntu Server** - –ë–∞–∑–æ–≤–∞ –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —à–∞–±–ª–æ–Ω—É.
- **QEMU Guest Agent** - –í–∑–∞—î–º–æ–¥—ñ—è —Ö–æ—Å—Ç–∞ –∑ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ—é –º–∞—à–∏–Ω–æ—é.
- **Cloud-Init** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–µ—Ä–µ–∂—ñ –ø—Ä–∏ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—ñ.

### Scripting & Tools
- **Bash** - –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥.
- **Python 3** - –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏ (–ø–∞—Ä—Å–∏–Ω–≥ –≤–µ—Ä—Å—ñ–π, HTTP-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ —Ñ–∞–π–ª—ñ–≤).
- **Aria2** - –ë–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–µ–ª–∏–∫–∏—Ö –∞—Ä—Ö—ñ–≤—ñ–≤.

### Application
- **Rocket.Chat** - –¶—ñ–ª—å–æ–≤–∏–π —Å–µ—Ä–≤—ñ—Å –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è.
- **Snapd** - –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç—ñ–≤, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó —Å–µ—Ä–≤–µ—Ä–∞ —á–∞—Ç—É.

##  –ó–∞–ø—É—Å–∫ –ø—Ä–æ—î–∫—Ç—É

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏
- –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π **Proxmox VE**.
- **Root-–¥–æ—Å—Ç—É–ø** –¥–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—É Proxmox.
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è `aria2` —Ç–∞ –æ–±—Ä–∞–∑—ñ–≤).
- –í—ñ–ª—å–Ω–µ –º—ñ—Å—Ü–µ —É —Å—Ö–æ–≤–∏—â—ñ `local-lvm` (–ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è VM).

### –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

1.  **–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å–∫—Ä–∏–ø—Ç —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó (`download.sh`) –Ω–∞ —Å–µ—Ä–≤–µ—Ä.**

2.  **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ—Ü–µ—Å —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó:**
    ```bash
    bash -c "$(curl -fsSL  https://raw.githubusercontent.com/Dr1xam/PADBS/refs/heads/main/download.sh)"
    ```
<img width="1386" height="224" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 12-34-38" src="https://github.com/user-attachments/assets/94871c42-7e5e-4440-ac76-5a500f5740ad" />

    **–©–æ –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:**
    1.  –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è `aria2` (—è–∫—â–æ –≤—ñ–¥—Å—É—Ç–Ω—è) –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.
    2.  –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–æ–∑–¥—ñ–ª–µ–Ω–æ–≥–æ –∞—Ä—Ö—ñ–≤—É —à–∞–±–ª–æ–Ω—É (`part_archive_*`) —Ç–∞ —Å–∫—Ä–∏–ø—Ç—ñ–≤ . (–î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è —ñ–Ω—Å—Ç–∞–ª—è—Ç–æ—Ä—É `/var/lib/vz/dump`).
    3.  –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ —Ç–∞ —Å–∫–ª–µ—é–≤–∞–Ω–Ω—è –±–µ–∫–∞–ø—É (`part_archive_*`) —É —Ñ–∞–π–ª `.vma.zst`.
    4.  –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω—É —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è (`src/install.sh`).
    5.  –ü—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ —Ñ–∞–π–ª—ñ–≤ –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É –ø—Ä–æ–≥—Ä–∞–º–∞ –≤–∏–¥–∞–ª—è—î –Ω–µ—Ä–æ–±–æ—á–∏–π —ñ–Ω—Å—Ç–∞–ª—è—Ç–æ—Ä.

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

–ü—Ä–æ—Ü–µ—Å —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó —Ä–æ–∑–¥—ñ–ª–µ–Ω–∏–π –Ω–∞ –º–æ–¥—É–ª—ñ, —è–∫—ñ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ:

### 1. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó (`make-vm-settings.sh`)
-   **–ü–æ—à—É–∫ ID:** –°–∫—Ä–∏–ø—Ç –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –≤—ñ–ª—å–Ω—ñ VM ID (—É –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ 100M+).
-   **–ú–µ—Ä–µ–∂–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î —à–ª—é–∑ (`GATEWAY`) —Ç–∞ —Å–∫–∞–Ω—É—î –ø—ñ–¥–º–µ—Ä–µ–∂—É –¥–ª—è –ø–æ—à—É–∫—É –≤—ñ–ª—å–Ω–æ—ó IP-–∞–¥—Ä–µ—Å–∏.
-   **–ö–æ–Ω—Ñ—ñ–≥:** –°—Ç–≤–æ—Ä—é—î —Ñ–∞–π–ª `vm.conf` —ñ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ä–µ—Å—É—Ä—Å—ñ–≤ (4 Core, 4GB RAM, 50GB Disk).

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω—É (`make-template.sh`)
-   –í—ñ–¥–Ω–æ–≤–ª—é—î VM —ñ–∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ–≥–æ –±–µ–∫–∞–ø—É `vzdump-qemu-*.vma.zst`.
-   –ü—Ä–∏—Å–≤–æ—é—î —ñ–º'—è `deploy-template`.
-   –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —É `src/make_template.log`.

### 3. –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è Rocket.Chat (`make-rocketchat.sh`)
-   **–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è:** –°—Ç–≤–æ—Ä—é—î "Linked Clone" –∑ —à–∞–±–ª–æ–Ω—É.
-   **–†–µ—Å–∞–π–∑:** –†–æ–∑—à–∏—Ä—é—î –¥–∏—Å–∫ –¥–æ 50 –ì–ë.
-   **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:** –ü—Ä–æ–ø–∏—Å—É—î IP, Gateway —Ç–∞ DNS —á–µ—Ä–µ–∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Proxmox.
-   **–Ü–Ω—Å—Ç–∞–ª—è—Ü—ñ—è:**
    -   –ü—ñ–¥—ñ–π–º–∞—î —Ç–∏–º—á–∞—Å–æ–≤–∏–π Python HTTP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ —Ö–æ—Å—Ç—ñ (–ø–æ—Ä—Ç 8888).
    -   –ó–º—É—à—É—î VM –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ç–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ —Å–∫—Ä–∏–ø—Ç —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó —á–µ—Ä–µ–∑ `qm guest exec`.
    -   –í—Å—Ç–∞–Ω–æ–≤–ª—é—î `snapd` —Ç–∞ `rocketchat-server`.
<img width="1384" height="746" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 12-43-29" src="https://github.com/user-attachments/assets/2cc30a73-8818-432d-afce-66c93e047d4d" />

### 4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
-   **–ü–µ—Ä–µ–≥–ª—è–¥ IP-–∞–¥—Ä–µ—Å–∏:** –ó–∞–π–¥—ñ—Ç—å —É —Ç–µ—Ä–º—ñ–Ω–∞–ª –º–∞—à–∏–Ω–∏ –ø—ñ–¥ –Ω–∞–∑–≤–æ—é rocketchat —ñ –≤–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É:
```bash
  ip a
```
<img width="1864" height="812" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 12-43-42" src="https://github.com/user-attachments/assets/ee280927-94d0-471b-86e9-2203b5d0e531" />

–¢–µ–ø–µ—Ä –ø–µ—Ä–µ–π–¥—ñ—Ç—å –≤ —ó—ó –∫–æ–Ω—Å–æ–ª—å  `>_ Console`

<img width="1870" height="846" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 13-22-33" src="https://github.com/user-attachments/assets/ad824c9b-b7bc-499c-a035-8b7375b7400a" />

—è–∫—â–æ –º–∞—à–∏–Ω–∞ –¥–æ—Å—ñ —â–æ—Å—å –≤–∏–≤–æ–¥–∏—Ç—å, —Ç–æ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å `Enter` –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–≤–µ–¥—ñ—Ç—å –ª–æ–≥—ñ–Ω —Ç–∞ –ø–∞—Ä–æ–ª—å
<img width="1170" height="31" alt="–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è" src="https://github.com/user-attachments/assets/591a0fd1-1306-4e02-ad83-e173b29f6c5b" />

```
login: sw
password: sw
```

<img width="1244" height="453" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 12-47-29" src="https://github.com/user-attachments/assets/3a83da09-5bec-4035-94ec-078d9b6fc801" />

–í–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É
```bash
  ip a
```
–æ—Ç—Ä–∏–º–∞—î—Ç–µ –ø—Ä–∏–±–ª–∏–∑–Ω–æ —Ç–∞–∫–∏–π –≤–∏–≤—ñ–¥:
<img width="1233" height="237" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 12-47-40" src="https://github.com/user-attachments/assets/64c98586-7f73-4fbb-bb8c-2aafac9ab6f8" />



   –ù–∞ —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ –∫–æ–ª—å–æ—Ä–æ–º –≤—ñ–¥–º—ñ—á–µ–Ω–æ, –¥–µ —à—É–∫–∞—Ç–∏ IP-–∞–¥—Ä–µ—Å—É –º–∞—à–∏–Ω–∏.
-   **–í—Ö—ñ–¥ —É Rocket—Åhat:** –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∫–ª–∞–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞ —Ç–∞ –≤–ø–∏—à—ñ—Ç—å –ø–æ—Å–∏–ª–∞–Ω–Ω—è:
```url
    ip(–º–∞—à–∏–Ω–∏):3000 
    #–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ 
    192.168.1.50:3000
```
<img width="1919" height="42" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 13-02-43" src="https://github.com/user-attachments/assets/8b6a1df6-2883-4603-a679-ad6028931c77" />

  –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å—Å—è –≤–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ Rocketchat:
    
<img width="1918" height="1159" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 12-49-01" src="https://github.com/user-attachments/assets/8a2b1396-01d6-4c30-9a28-d570ad4ae6d5" />

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –õ–æ–≥–∏

–£—Å—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è —É –ª–æ–≥-—Ñ–∞–π–ª–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `src/`:

```bash
# –õ–æ–≥ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω—É
tail -f src/make_template.log

# –õ–æ–≥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ VM
tail -f src/deploy_rocketchat_vm.log

# –õ–æ–≥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ VM (—ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—è —á–∞—Ç—É)
tail -f src/deploy_rocketchat.log
```
## –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –°–∫—Ä–∏–ø—Ç –∑–∞–≤–∏—Å –Ω–∞ "–û—á—ñ–∫—É—é –ø–æ–≤–Ω–æ—ó –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ VM..."
–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ —Ö–æ—Å—Ç –Ω–µ –º–æ–∂–µ –∑–≤'—è–∑–∞—Ç–∏—Å—è –∑ QEMU Agent –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ VM.

1.  –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å VM —É Proxmox GUI.
2.  –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Å–µ—Ä–≤—ñ—Å `qemu-guest-agent` –∑–∞–ø—É—â–µ–Ω–∏–π –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –≥–æ—Å—Ç—å–æ–≤–æ—ó –û–° (—è–∫—â–æ —Ü–µ –º–æ–∂–ª–∏–≤–æ).

1.–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É VM —É Proxmox GUI.
–ó–Ω–∞–π–¥—ñ—Ç—å –≤–∞—à—É VM rocketchat: –£ —Å–ø–∏—Å–∫—É –ø—ñ–¥ –Ω–∞–∑–≤–æ—é —Å–µ—Ä–≤–µ—Ä–∞ –∑–Ω–∞–π–¥—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—É –º–∞—à–∏–Ω—É.
–ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –Ω–∞ —ñ–∫–æ–Ω–∫—É (—à–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ç—É—Å):

üü¢ –ó–µ–ª–µ–Ω–∏–π —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫ (Play): VM –∑–∞–ø—É—â–µ–Ω–∞ —ñ –ø—Ä–∞—Ü—é—î.
    
<img width="300" height="23" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 13-53-22" src="https://github.com/user-attachments/assets/2f12e6d9-e8ad-485e-84aa-95607ea5b01f" />

‚¨ú –°—ñ—Ä–∏–π –∫–≤–∞–¥—Ä–∞—Ç (Stop): VM –≤–∏–º–∫–Ω–µ–Ω–∞.
    
<img width="302" height="27" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 13-54-21" src="https://github.com/user-attachments/assets/8c5a6825-0cf7-47a7-84ad-c099ab3bc7ad" />

üîí –ó–∞–º–æ–∫ (Lock): VM –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –π–¥–µ –±–µ–∫–∞–ø –∞–±–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è).

<img width="259" height="26" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 16-39-44" src="https://github.com/user-attachments/assets/30817fd9-5baa-4988-9fbf-df42d2cb40ac" />

2.–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–µ—Ä–≤—ñ—Å—É `qemu-guest-agent` 

***–£–í–ê–ì–ê***:*–ù—ñ –≤ —è–∫–æ–º—É —Ä–∞–∑—ñ –Ω–µ –≤–∏—Ö–æ–¥—å—Ç–µ —ñ–∑ –∫–æ–Ω—Å–æ–ª—ñ –Ω–æ–¥–∏, –Ω–∞ —è–∫—ñ–π –±—É–≤ –∑–∞–ø—É—â–µ–Ω–∏–π —Å–∫—Ä–∏–ø—Ç, –±–æ –π–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –±—É–¥–µ –ø—Ä–∏–ø–∏–Ω–µ–Ω–æ –Ω–µ–≥–∞–π–Ω–æ!*
*–î–ª—è –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –¥—ñ–π –∑–∞–π–¥—ñ—Ç—å –≤ Proxmox –≤ –Ω–æ–≤—ñ–π –≤–∫–ª–∞–¥—Ü—ñ –Ω–µ –≤–∏—Ö–æ–¥—è—á–∏ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó.*
  –£ Proxmox –≤–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à—É VM (rocketchat).
  
  <img width="1864" height="812" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 12-43-42" src="https://github.com/user-attachments/assets/ee280927-94d0-471b-86e9-2203b5d0e531" />
  
  –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É `>_ Console` (–≤–≥–æ—Ä—ñ –ø—Ä–∞–≤–æ—Ä—É—á).

  <img width="1870" height="846" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 13-22-33" src="https://github.com/user-attachments/assets/ad824c9b-b7bc-499c-a035-8b7375b7400a" />
  
  –£–≤—ñ–π–¥—ñ—Ç—å —É —Å–∏—Å—Ç–µ–º—É:
—è–∫—â–æ –º–∞—à–∏–Ω–∞ –¥–æ—Å—ñ —â–æ—Å—å –≤–∏–≤–æ–¥–∏—Ç—å —Ç–æ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å `Enter` –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–≤–µ–¥—ñ—Ç—å –ª–æ–≥—ñ–Ω —Ç–∞ –ø–∞—Ä–æ–ª—å
<img width="1170" height="31" alt="–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è" src="https://github.com/user-attachments/assets/591a0fd1-1306-4e02-ad83-e173b29f6c5b" />

```
login: sw
password: sw
```

<img width="1244" height="453" alt="–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –∑ 2025-12-06 12-47-29" src="https://github.com/user-attachments/assets/3a83da09-5bec-4035-94ec-078d9b6fc801" />

–í–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏: –ù–∞–ø–∏—à—ñ—Ç—å —Ü—é –∫–æ–º–∞–Ω–¥—É —ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å Enter:

```bash
systemctl status qemu-guest-agent
```

–©–æ –≤–∏ –º–∞—î—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏?
–í–∞—Ä—ñ–∞–Ω—Ç –ê (–í—Å–µ –¥–æ–±—Ä–µ):
    –í–∏ –ø–æ–±–∞—á–∏—Ç–µ –∑–µ–ª–µ–Ω–∏–π –Ω–∞–ø–∏—Å 

```bash
    active (running).
```
–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –∞–≥–µ–Ω—Ç –ø—Ä–∞—Ü—é—î, –∞–ª–µ —Å–∫—Ä–∏–ø—Ç –≤—Å–µ –æ–¥–Ω–æ –Ω–µ –±–∞—á–∏—Ç—å –π–æ–≥–æ. –°–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∞–≥–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–æ—é: 

```bash
systemctl restart qemu-guest-agent.
```

–í–∞—Ä—ñ–∞–Ω—Ç –ë (–ê–≥–µ–Ω—Ç –≤–∏–º–∫–Ω–µ–Ω–∏–π): –í–∏ –ø–æ–±–∞—á–∏—Ç–µ –Ω–∞–ø–∏—Å inactive (dead).

–†—ñ—à–µ–Ω–Ω—è: –ó–∞–ø—É—Å—Ç—ñ—Ç—å –π–æ–≥–æ –∫–æ–º–∞–Ω–¥–æ—é:

```bash
systemctl start qemu-guest-agent
```

### –ü–æ–º–∏–ª–∫–∞ "Network is unreachable" –∞–±–æ IP –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
–Ø–∫—â–æ —Å–∫—Ä–∏–ø—Ç –Ω–µ –∑–º—ñ–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ —à–ª—é–∑:

1.  –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–µ—Ä–µ–∂—ñ —Ö–æ—Å—Ç–∞.
2.  –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ —Ñ–∞–π–ª `vm.conf` (–ø—ñ—Å–ª—è –π–æ–≥–æ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó) –∞–±–æ –∑–∞–¥–∞–π—Ç–µ `AUTO_GW` –≤—Ä—É—á–Ω—É –≤ —Å–∫—Ä–∏–ø—Ç—ñ `make-vm-settings.sh`.

### –ü—Ä–æ–±–ª–µ–º–∏ –∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º (Checksum error)
–Ø–∫—â–æ `download.sh` –ø–æ–≤—ñ–¥–æ–º–ª—è—î –ø—Ä–æ –ø–æ–º–∏–ª–∫—É —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ —Ñ–∞–π–ª—ñ–≤:

```bash
# –í–∏–¥–∞–ª—ñ—Ç—å —Ç–∏–º—á–∞—Å–æ–≤—ñ —Ñ–∞–π–ª–∏ —Ç–∞ —Å–ø—Ä–æ–±—É–π—Ç–µ –∑–Ω–æ–≤—É
rm -rf download_buffer
rm -f *.vma.zst
./download.sh
```

## –í–∏–¥–∞–ª–µ–Ω–Ω—è —ñ–Ω—Å—Ç–∞–ª—è—Ç–æ—Ä–∞



```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é 
cd /var/lib/vz/dump
# –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —ñ–Ω—Å—Ç–∞–ª—è—Ç–æ—Ä–∞ 
ls
# –í–∏–≤—ñ–¥ –∫–æ–º–∞–Ω–¥–∏
... src vzdump-qemu-815898734-2025_11_24-17_42_12.vma.zst Rocketchat.tar.gz
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –≤ src
cd src
# –ó–∞–ø—É—Å–∫–∞—î–º–æ —Å–∫—Ä–∏–ø—Ç –≤–∏–¥–∞–ª–µ–Ω–Ω—è
./delete-script.sh
```
**–£–≤–∞–≥–∞:** *–¶–µ –Ω–µ –≤–∏–¥–∞–ª–∏—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω—ñ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—ñ –º–∞—à–∏–Ω–∏ –≤ Proxmox.*

## –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –º–∞—à–∏–Ω ##
-  **–ü–µ—Ä–µ–≥–ª—è–¥:** –ø—ñ—Å–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∑–∞ —è–∫–∏–º–∏ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–∏—Å—è –º–∞—à–∏–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É —Ñ–∞–π–ª—ñ vm.conf
—â–æ–± –π–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ
```bash
   #1.–ü–µ—Ä–µ–π—Ç–∏ —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é
   cd /var/lib/vz/dump
   #2.–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ñ–∞–π–ª—ñ–≤ —ñ–Ω—Å—Ç–∞–ª—è—Ç–æ—Ä–∞
   ls
   # –í–∏–≤—ñ–¥ –∫–æ–º–∞–Ω–¥–∏
   ... src vzdump-qemu-815898734-2025_11_24-17_42_12.vma.zst Rocketchat.tar.gz
   #3.–ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –≤ src
   cd src
   #4.–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ñ–∞–π–ª–∞ —ñ–∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é –º–∞—à–∏–Ω
   ls
   #5.–ü—Ä–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ vm.conf –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –π–æ–≥–æ —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä —Ç–µ–∫—Å—Ç—É
   nano vm.conf
   #–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –ø–æ–±–∞—á–∏–º–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏—Ö –º–∞—à–∏–Ω —Ç–∞–∫–æ–≥–æ —Ç–∏–ø—É
   
   VM_TARGET_STORAGE="local-lvm"
   GATEWAY="–í–ê–®_GATEWAY_IP"
   PROXMOX_IP="–í–ê–®_PROXMOX_IP"
   # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è –®–∞–±–ª–æ–Ω—É 
   TEMPLATE_VM_ID="ID_–î–õ–Ø_–®–ê–ë–õ–û–ù–£"
   UBUNTU_BACKUP_TEMPLATE_NAME="vzdump-qemu-815898734-2025_11_24-17_42_12.vma.zst"
   MAKE_TEMPLATE_LOG_FILE="./src/make_template.log"
   # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è –º–∞—à–∏–Ω–∏ –∑ —Ä–æ–∫–µ—Ç—á–∞—Ç–æ–º
   ROCKETCHAT_VM_ID="ID_–ù–û–í–û–á_VM"
   ROCKETCHAT_VM_HOSTNAME="rocketchat"
   ROCKETCHAT_DISK="50G"
   ROCKETCHAT_VM_RAM="4096"
   ROCKETCHAT_VM_CORES="4"
   ROCKETCHAT_VM_IP="IP_–ê–î–†–ï–°–ê_VM/24"
   ROCKETCHAT_VM_BRIDGE="vmbr0"
   ROCKETCHAT_VM_DNS="8.8.8.8"
   DEPLOY_ROCKETCHAT_VM_LOG_FILE="deploy_rocketchat_vm.log"
   ROCKETCHAT_ARCHIVE_NAME="Rocketchat.tar.gz"
   ROCKETCHAT_VM_INSTALLATION_DIR="/root/offline_install"
   DEPLOY_ROCKETCHAT_LOG_FILE="deploy_rocketchat.log"
```
- **–î–µ—Ç–∞–ª—ñ —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è:** –ë—ñ–ª—å—à—ñ—Å—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π –ø—Ä–æ–ø–∏—Å–∞–Ω—ñ —Å—Ç–∞—Ç–∏—á–Ω–æ –∞–ª–µ —Ç–∞–∫—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, —è–∫:
```bash
   GATEWAY
   PROXMOX_IP
   # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è –®–∞–±–ª–æ–Ω—É 
   TEMPLATE_VM_ID
   # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è –º–∞—à–∏–Ω–∏ –∑ —Ä–æ–∫–µ—Ç—á–∞—Ç–æ–º
   ROCKETCHAT_VM_ID
   ROCKETCHAT_VM_IP
```
–≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –∞–±–æ –≤–∏—Ç—è–≥—É—é—Ç—å—Å—è –∑–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏

    GATEWAY
    PROXMOX_IP 
–≤–∏—Ç—è–≥—É—é—Ç—å—Å—è —ñ–∑ PROXMOX —Ç–∞ –º–µ—Ä–µ–∂—ñ

    TEMPLATE_VM_ID
    ROCKETCHAT_VM_ID
–í–∏–ø–∞–¥–∫–æ–≤–æ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è —ñ–∑ –¥—ñ–∞–ø–∞–∑–æ–Ω—É 100000000-999999999 —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è —á–∏ –Ω–µ –∑–∞–π–Ω—è—Ç—ñ —ñ–Ω—à–∏–º–∏ –º–∞—à–∏–Ω–∞–º–∏

    ROCKETCHAT_VM_IP
–í—ñ–¥ GATEWAY –≤—ñ–¥—Ä—ñ–∑–∞—î—Ç—å—Å—è 3 –æ–∫—Ç–µ—Ç–∏ `192.168.1.1 --> 192.168.1.` —ñ–¥–µ –ø—ñ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ 4-–≥–æ –æ–∫—Ç–µ—Ç—É —è–∫–∞ –≤–∏–±–∏—Ä–∞—î—Ç—å—Å—è —ñ–∑ 50 –¥–æ 200
–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `192.168.1. + 50 = 192.168.1.50` —è–∫—â–æ –∑–∞–π–Ω—è—Ç–∞ —Ç–æ `192.168.1. + 50 = 192.168.1.51` —ñ —Ç–∞–∫ –¥–∞–ª—ñ ... –ø–æ–∫–∏ –Ω–µ –∑–Ω–∞–π–¥–µ –≤—ñ–ª—å–Ω–æ–≥–æ IP



 

